---
# User running the Nextcloud containers
service_nextcloud_user: "{{ baseline_config_admin_users[0].name }}"

# Base directory for Nextcloud files
service_nextcloud_base_dir: /opt/nextcloud

# Domain — REQUIRED, set in host/group vars
service_nextcloud_domain: ""

# Container images — pin to specific versions
service_nextcloud_image: docker.io/library/nextcloud:32.0.6-apache
service_nextcloud_db_image: docker.io/library/postgres:16.6-alpine
service_nextcloud_redis_image: docker.io/library/redis:7.4-alpine

# Database
service_nextcloud_db_name: nextcloud
service_nextcloud_db_user: nextcloud
service_nextcloud_db_password: "{{ vault_nextcloud_db_password }}"

# Admin
service_nextcloud_admin_user: admin
service_nextcloud_admin_password: "{{ vault_nextcloud_admin_password }}"

# OIDC authentication via Authelia
service_nextcloud_oidc_enabled: true
service_nextcloud_oidc_provider_url: "https://{{ service_authelia_domain }}"
service_nextcloud_oidc_client_id: nextcloud
service_nextcloud_oidc_client_secret: "{{ vault_authelia_oidc_nextcloud_client_secret }}"

# Podman network (shared with Caddy)
service_nextcloud_network: "{{ service_caddy_network }}"

# Trusted proxies — Podman network CIDR range
service_nextcloud_trusted_proxies: "10.89.0.0/16"

# Maintenance window start hour (UTC), 1 = 02:00 CET
service_nextcloud_maintenance_window_start: 1

# Default phone region (ISO 3166-1 alpha-2)
service_nextcloud_default_phone_region: DE

# Upload limit
service_nextcloud_max_upload_size: 10G

# Caddy base directory for site config drop-in
service_nextcloud_caddy_base_dir: "{{ service_caddy_base_dir | default('/opt/caddy') }}"
